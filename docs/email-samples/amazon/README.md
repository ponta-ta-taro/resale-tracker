# Amazon メールサンプル

Amazon経由でApple製品を購入した場合のメールサンプル。

## 対象メール一覧

| # | ファイル名 | メール種類 | 注文番号 |
|---|-----------|-----------|----------|
| 01 | `01_order_250-8477857-2415055.eml` | 注文済み | 250-8477857-2415055 |
| 02 | `02_shipped_250-8477857-2415055.eml` | 発送済み | 250-8477857-2415055 |
| 03 | `03_out_for_delivery_250-8477857-2415055.eml` | 配達中 | 250-8477857-2415055 |
| 04 | `04_delivered_250-8477857-2415055.eml` | 配達済み | 250-8477857-2415055 |

---

## 01: 注文済みメール（Order Placed）

### メール情報
- **差出人**: `Amazon.co.jp <auto-confirm@amazon.co.jp>`
- **件名パターン**: `注文済み: 「{商品名}...」`

### パース対象フィールド

| フィールド | DB カラム | 例 | 備考 |
|-----------|----------|-----|------|
| 注文番号 | order_number | 250-8477857-2415055 | |
| 機種名 | model_name | iPhone 17 Pro | 商品名から抽出 |
| 容量 | storage | 256GB | 商品名から抽出 |
| 価格 | purchase_price | 179800 | |
| お届け予定（開始） | expected_delivery_start | 2026/01/14 05:00 | |
| お届け予定（終了） | expected_delivery_end | 2026/01/14 11:59 | 時間帯付き |

### 注意点
- Amazonはお届け予定が「時間帯」まで指定される
- 商品名から機種・容量・色を正規表現で抽出する必要あり

---

## 02: 発送済みメール（Shipped）

### メール情報
- **差出人**: `Amazon.co.jp <shipment-tracking@amazon.co.jp>`
- **件名パターン**: `発送済み: 「{商品名}...」`

### パース対象フィールド

| フィールド | DB カラム | 例 | 備考 |
|-----------|----------|-----|------|
| 注文番号 | order_number | 250-8477857-2415055 | |
| 配送業者 | carrier | Amazon | Amazonデリバリー |
| 追跡番号 | tracking_number | （メール内リンクから） | |

---

## 03: 配達中メール（Out for Delivery）

### メール情報
- **差出人**: `Amazon.co.jp <shipment-tracking@amazon.co.jp>`
- **件名パターン**: `配達中: 「{商品名}...」`

### パース対象フィールド

| フィールド | DB カラム | 例 | 備考 |
|-----------|----------|-----|------|
| 注文番号 | order_number | 250-8477857-2415055 | |
| ステータス更新 | status | out_for_delivery | |

---

## 04: 配達済みメール（Delivered）

### メール情報
- **差出人**: `Amazon.co.jp <shipment-tracking@amazon.co.jp>`
- **件名パターン**: `配達済み 1点の商品 - 注文番号 xxx-xxxxxxx-xxxxxxx`

### パース対象フィールド

| フィールド | DB カラム | 例 | 備考 |
|-----------|----------|-----|------|
| 注文番号 | order_number | 250-8477857-2415055 | 件名から取得可 |
| 配達完了日時 | arrived_at | （メール受信日時） | |
| ステータス更新 | status | arrived | |

---

## ファイル命名規則

```
{連番}_{メール種類}_{注文番号}.eml

例:
01_order_250-8477857-2415055.eml
02_shipped_250-8477857-2415055.eml
03_out_for_delivery_250-8477857-2415055.eml
04_delivered_250-8477857-2415055.eml
```

---

## Apple StoreとAmazonの違い

| 項目 | Apple Store | Amazon |
|------|-------------|--------|
| 注文番号形式 | Wxxxxxxxxxx | xxx-xxxxxxx-xxxxxxx |
| お届け予定 | 日付のみ or 範囲 | 時間帯まで指定 |
| 配送業者 | ヤマト / JPロジ | Amazonデリバリー等 |
| メール種類 | 4〜5種類 | 4種類 |
| 請求書 | 別メールでPDF添付 | 注文履歴から取得 |
| シリアル番号 | 請求書PDFに記載 | なし（製品本体で確認） |

---

## サンプル注文データ

### 250-8477857-2415055
- **商品**: Apple iPhone 17 Pro 256GB（シルバー）
- **価格**: 179,800円
- **注文日**: 2026/01/14
- **お届け予定**: 2026/01/14 午前5:00〜11:59
- **連絡先**: kouta.ogawa1978@gmail.com
