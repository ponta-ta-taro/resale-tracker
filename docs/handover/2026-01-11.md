# ResaleTracker é–‹ç™ºå¼•ãç¶™ããƒ¡ãƒ¢ï¼ˆ2026/01/11ï¼‰

## ğŸ‰ ç¾åœ¨ã®çŠ¶æ…‹ï¼šæœ¬ç•ªç¨¼åƒä¸­ï¼

**ResaleTracker** - iPhoneè»¢å£²ã®ä¾¡æ ¼ç®¡ç†ãƒ»åˆ†æã‚¢ãƒ—ãƒª

ã™ã¹ã¦ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå®Œäº†ã—ã€æ¯æ—¥è‡ªå‹•ã§ãƒ‡ãƒ¼ã‚¿åé›†ãŒè¡Œã‚ã‚Œã‚‹çŠ¶æ…‹ã«ãªã£ã¦ã„ã¾ã™ã€‚

---

## æœ¬ç•ªURL

| ã‚µãƒ¼ãƒ“ã‚¹ | URL |
|---------|-----|
| **Webã‚µã‚¤ãƒˆ** | https://resale-tracker-opal.vercel.app |
| **GitHub** | https://github.com/ponta-ta-taro/resale-tracker |
| **Supabase** | https://supabase.com/dashboard ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: resale-trackerï¼‰ |
| **Render** | https://dashboard.render.com ï¼ˆã‚µãƒ¼ãƒ“ã‚¹: resale-tracker-scraperï¼‰ |

---

## å®Œäº†ã—ãŸPhase

| Phase | å†…å®¹ | çŠ¶æ…‹ |
|-------|------|------|
| Phase 1 | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— + Supabaseé€£æº | âœ… å®Œäº† |
| Phase 2 | è‡ªå‹•ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ï¼ˆPlaywright + DOMå–å¾—ï¼‰ | âœ… å®Œäº† |
| Phase 3 | Renderãƒ‡ãƒ—ãƒ­ã‚¤ + å®šæœŸå®Ÿè¡Œè¨­å®š | âœ… å®Œäº† |
| Phase 4 | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆä¾¡æ ¼ã‚°ãƒ©ãƒ•ãƒ»ä¸€è¦§è¡¨ç¤ºï¼‰ | âœ… å®Œäº† |
| Phase 5 | åœ¨åº«ç®¡ç†æ©Ÿèƒ½ | â³ æœªç€æ‰‹ |
| Phase 6 | ä¾¡æ ¼äºˆæ¸¬ï¼ˆAzure MLï¼‰ | â³ æœªç€æ‰‹ |

---

## è‡ªå‹•é‹ç”¨ã®ä»•çµ„ã¿

```
æ¯æ—¥ AM 10:00 (JST)
        â†“
Render Cron Job ãŒè‡ªå‹•å®Ÿè¡Œ
        â†“
Playwright ã§ãƒ¢ãƒã‚¤ãƒ«ãƒŸãƒƒã‚¯ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹
        â†“
DOM ã‹ã‚‰ä¾¡æ ¼æƒ…å ±ã‚’æŠ½å‡ºï¼ˆ12æ©Ÿç¨®ï¼‰
        â†“
Supabase (PostgreSQL) ã«ä¿å­˜
        â†“
Vercel ã®ã‚µã‚¤ãƒˆã§æœ€æ–°ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹
```

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | æŠ€è¡“ |
|---------|------|
| ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | Next.js 14 (App Router) + Tailwind CSS + Recharts |
| ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | Next.js API Routes |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | Supabase (PostgreSQL) |
| ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚° | Playwright (Python) + DOMå–å¾— |
| å®šæœŸå®Ÿè¡Œ | Render Cron Jobï¼ˆ`0 1 * * *` = æ¯æ—¥AM10æ™‚JSTï¼‰ |
| ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚° | Vercel (ãƒ•ãƒ­ãƒ³ãƒˆ) / Render (ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ‘ãƒ¼) |

---

## ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ï¼ˆ12æ©Ÿç¨®ï¼‰

| æ©Ÿç¨® | å®¹é‡ | ä¾¡æ ¼ |
|------|------|------|
| iPhone 17 Pro Max | 256GB | 203,000å†† |
| iPhone 17 Pro Max | 512GB | 232,500å†† |
| iPhone 17 Pro Max | 1TB | 267,500å†† |
| iPhone 17 Pro Max | 2TB | 318,000å†† |
| iPhone 17 Pro | 256GB | 183,000å†† |
| iPhone 17 Pro | 512GB | 213,500å†† |
| iPhone 17 Pro | 1TB | 243,500å†† |
| iPhone Air | 256GB | 152,000å†† |
| iPhone Air | 512GB | 166,000å†† |
| iPhone Air | 1TB | 170,000å†† |
| iPhone 17 | 256GB | 130,000å†† |
| iPhone 17 | 512GB | 162,000å†† |

---

## ç’°å¢ƒå¤‰æ•°

### Vercelï¼ˆSettings â†’ Environment Variablesï¼‰
```
NEXT_PUBLIC_SUPABASE_URL=https://sudycxugnvprrrrlkdmm.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=ï¼ˆSupabaseã®anon keyï¼‰
```

### Renderï¼ˆEnvironment â†’ Environment Variablesï¼‰
```
SUPABASE_URL=https://sudycxugnvprrrrlkdmm.supabase.co
SUPABASE_KEY=ï¼ˆSupabaseã®anon keyï¼‰
```

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º
- `.env.local` - Next.jsç”¨
- `scraper/.env` - Pythonç”¨

---

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
resale-tracker/
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ page.tsx            # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ prices/page.tsx     # ä¾¡æ ¼ä¸€è¦§
â”‚   â”œâ”€â”€ globals.css
â”‚   â””â”€â”€ api/prices/         # API
â”‚       â”œâ”€â”€ route.ts
â”‚       â””â”€â”€ latest/route.ts
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ PriceChart.tsx      # ä¾¡æ ¼æ¨ç§»ã‚°ãƒ©ãƒ•
â”‚   â””â”€â”€ PriceTable.tsx      # ä¾¡æ ¼ä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ«
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ supabase.ts         # Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ scraper/                # Pythonã‚¹ã‚¯ãƒ¬ã‚¤ãƒ‘ãƒ¼
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ main.py             # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ scraper.py          # Playwright ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°
â”‚   â”œâ”€â”€ db_client.py        # Supabase ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ SPEC.md                 # ä»•æ§˜æ›¸
â”œâ”€â”€ PHASES.md               # é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚ºå®šç¾©
â”œâ”€â”€ RULES.md                # ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«
â””â”€â”€ DEV_LOG.md              # é–‹ç™ºãƒ­ã‚°
```

---

## ç™ºç”Ÿã—ãŸãƒˆãƒ©ãƒ–ãƒ«ã¨è§£æ±ºç­–

| å•é¡Œ | è§£æ±ºç­– |
|------|--------|
| ãƒ¢ãƒã‚¤ãƒ«ãƒŸãƒƒã‚¯ã‚¹ãŒCookieå¿…é ˆ | Playwrightã§ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶ä½¿ç”¨ |
| OCRã§ä¾¡æ ¼æŠ½å‡º0ä»¶ | DOMå–å¾—æ–¹å¼ã«å¤‰æ›´ |
| Supabase API Keyã‚¨ãƒ©ãƒ¼ | Legacy anon keyã‚’ä½¿ç”¨ |
| Render Dockerãƒ“ãƒ«ãƒ‰å¤±æ•— | `playwright install-deps` ã‚’å‰Šé™¤ |

---

## æ¬¡ã«ã‚„ã‚‹ã“ã¨ï¼šPhase 5ï¼ˆåœ¨åº«ç®¡ç†ï¼‰

### æ©Ÿèƒ½è¦ä»¶
- ä»•å…¥ã‚ŒãŸiPhoneã®åœ¨åº«ç®¡ç†
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç†ï¼ˆç™ºæ³¨â†’ç´å“â†’è²©å£²â†’å…¥é‡‘ï¼‰
- åˆ©ç›Šè¨ˆç®—ï¼ˆä»•å…¥ã‚Œä¾¡æ ¼ vs è²©å£²ä¾¡æ ¼ï¼‰

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆï¼ˆinventoryãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
```sql
CREATE TABLE inventory (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  model_name TEXT NOT NULL,
  storage TEXT NOT NULL,
  color TEXT,
  imei TEXT,
  status TEXT DEFAULT 'ordered', -- ordered/arrived/selling/sold/paid
  purchase_price INTEGER,
  expected_price INTEGER,
  actual_price INTEGER,
  purchase_source TEXT,
  ordered_at TIMESTAMPTZ,
  arrived_at TIMESTAMPTZ,
  sold_at TIMESTAMPTZ,
  paid_at TIMESTAMPTZ,
  notes TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

### å®Ÿè£…å†…å®¹
1. Supabaseã§inventoryãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
2. åœ¨åº«ä¸€è¦§ãƒšãƒ¼ã‚¸ï¼ˆ/inventoryï¼‰
3. åœ¨åº«ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ 
4. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°æ©Ÿèƒ½
5. åˆ©ç›Šè¨ˆç®—ãƒ»é›†è¨ˆè¡¨ç¤º

---

## Antigravityã¸ã®æŒ‡ç¤ºãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

```
[ã‚¿ã‚¹ã‚¯ã®èª¬æ˜]

## ã‚„ã‚‹ã“ã¨
1. xxx
2. xxx

## é€²ã‚æ–¹
- ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ã¯ç¢ºèªãªã—ã§Acceptã—ã¦é€²ã‚ã¦ãã ã•ã„
- é€”ä¸­ã§è³ªå•ã‚„ç¢ºèªã‚’æ±‚ã‚ãšã€æœ€å¾Œã¾ã§ä¸€æ°—ã«å®Ÿè£…ã—ã¦ãã ã•ã„
- ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã‚‚è‡ªåˆ†ã§åˆ¤æ–­ã—ã¦ä¿®æ­£ã‚’ç¶šã‘ã¦ãã ã•ã„
- å®Œäº†ã—ãŸã‚‰çµæœã‚’ã¾ã¨ã‚ã¦å ±å‘Šã—ã¦ãã ã•ã„
```

---

## å‚è€ƒãƒªãƒ³ã‚¯

- **ãƒ¢ãƒã‚¤ãƒ«ãƒŸãƒƒã‚¯ã‚¹å…¬å¼**: https://mobile-mix.jp/
- **Supabase Docs**: https://supabase.com/docs
- **Next.js Docs**: https://nextjs.org/docs
- **Recharts**: https://recharts.org/

---

## æ›´æ–°å±¥æ­´

| æ—¥ä»˜ | å†…å®¹ |
|------|------|
| 2026/01/10 | Phase 1ã€œ4å®Œäº†ã€Vercel/Renderãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº† |
| 2026/01/11 | æœ¬ç•ªç¨¼åƒç¢ºèªã€å¼•ãç¶™ããƒ¡ãƒ¢ä½œæˆ |
